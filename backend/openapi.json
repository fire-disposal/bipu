{
  "openapi": "3.1.0",
  "info": {
    "title": "bipupu",
    "description": "BIPUPU API 服务",
    "version": "0.2.0"
  },
  "paths": {
    "/health": {
      "get": {
        "tags": [
          "系统"
        ],
        "summary": "Health Check",
        "description": "系统健康检查",
        "operationId": "health_check_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HealthResponse"
                }
              }
            }
          }
        }
      }
    },
    "/ready": {
      "get": {
        "tags": [
          "系统"
        ],
        "summary": "Readiness Check",
        "description": "就绪检查端点",
        "operationId": "readiness_check_ready_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReadyResponse"
                }
              }
            }
          }
        }
      }
    },
    "/live": {
      "get": {
        "tags": [
          "系统"
        ],
        "summary": "Liveness Check",
        "description": "存活检查端点",
        "operationId": "liveness_check_live_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LiveResponse"
                }
              }
            }
          }
        }
      }
    },
    "/": {
      "get": {
        "tags": [
          "系统"
        ],
        "summary": "Root",
        "description": "根路径 - 返回API信息",
        "operationId": "root__get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiInfoResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/public/register": {
      "post": {
        "tags": [
          "认证",
          "认证"
        ],
        "summary": "Register User",
        "description": "用户注册",
        "operationId": "register_user_api_public_register_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserCreate"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/public/login": {
      "post": {
        "tags": [
          "认证",
          "认证"
        ],
        "summary": "Login",
        "description": "用户登录",
        "operationId": "login_api_public_login_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserLogin"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Token"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/public/refresh": {
      "post": {
        "tags": [
          "认证",
          "认证"
        ],
        "summary": "Refresh Token",
        "description": "刷新访问令牌",
        "operationId": "refresh_token_api_public_refresh_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TokenRefresh"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Token"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/public/logout": {
      "post": {
        "tags": [
          "认证",
          "认证"
        ],
        "summary": "Logout",
        "description": "用户登出",
        "operationId": "logout_api_public_logout_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StatusResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/messages/": {
      "post": {
        "tags": [
          "消息"
        ],
        "summary": "Send Message",
        "description": "发送消息\n\n支持：\n- 用户间传讯（receiver_id 为用户的 bipupu_id）\n- 向服务号发送消息（receiver_id 为服务号 ID，如 \"cosmic.fortune\"）",
        "operationId": "send_message_api_messages__post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MessageCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MessageResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "消息"
        ],
        "summary": "Get Messages",
        "description": "获取消息列表\n\n参数：\n- direction: sent（发件箱）或 received（收件箱）\n- page: 页码\n- page_size: 每页数量",
        "operationId": "get_messages_api_messages__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "direction",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "sent 或 received",
              "default": "received",
              "title": "Direction"
            },
            "description": "sent 或 received"
          },
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1,
              "title": "Page"
            }
          },
          {
            "name": "page_size",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "default": 20,
              "title": "Page Size"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MessageListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/messages/favorites": {
      "get": {
        "tags": [
          "消息"
        ],
        "summary": "Get Favorites",
        "description": "获取收藏消息列表",
        "operationId": "get_favorites_api_messages_favorites_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1,
              "title": "Page"
            }
          },
          {
            "name": "page_size",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "default": 20,
              "title": "Page Size"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FavoriteListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/messages/{message_id}/favorite": {
      "post": {
        "tags": [
          "消息"
        ],
        "summary": "Add Favorite",
        "description": "收藏消息",
        "operationId": "add_favorite_api_messages__message_id__favorite_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "message_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Message Id"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "anyOf": [
                  {
                    "$ref": "#/components/schemas/FavoriteCreate"
                  },
                  {
                    "type": "null"
                  }
                ],
                "title": "Favorite Data"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FavoriteResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "消息"
        ],
        "summary": "Remove Favorite",
        "description": "取消收藏",
        "operationId": "remove_favorite_api_messages__message_id__favorite_delete",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "message_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Message Id"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/messages/{message_id}": {
      "delete": {
        "tags": [
          "消息"
        ],
        "summary": "Delete Message",
        "description": "删除消息（只能删除收到的消息）",
        "operationId": "delete_message_api_messages__message_id__delete",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "message_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Message Id"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/blocks": {
      "post": {
        "tags": [
          "黑名单",
          "黑名单"
        ],
        "summary": "Block User",
        "description": "拉黑用户",
        "operationId": "block_user_api_blocks_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BlockUserRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StatusResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "黑名单",
          "黑名单"
        ],
        "summary": "Get Blocked Users",
        "description": "获取黑名单列表",
        "operationId": "get_blocked_users_api_blocks_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "description": "页码",
              "default": 1,
              "title": "Page"
            },
            "description": "页码"
          },
          {
            "name": "size",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "每页数量",
              "default": 20,
              "title": "Size"
            },
            "description": "每页数量"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PaginatedResponse_BlockedUserResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/blocks/{user_id}": {
      "delete": {
        "tags": [
          "黑名单",
          "黑名单"
        ],
        "summary": "Unblock User",
        "description": "解除拉黑",
        "operationId": "unblock_user_api_blocks__user_id__delete",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "User Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StatusResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/profile/avatar": {
      "post": {
        "tags": [
          "用户资料",
          "用户资料"
        ],
        "summary": "Upload Avatar",
        "description": "上传并更新用户头像（存储到数据库）",
        "operationId": "upload_avatar_api_profile_avatar_post",
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/Body_upload_avatar_api_profile_avatar_post"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/profile/me": {
      "get": {
        "tags": [
          "用户资料",
          "用户资料"
        ],
        "summary": "Get Current User Info",
        "description": "获取当前用户信息",
        "operationId": "get_current_user_info_api_profile_me_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/profile/": {
      "get": {
        "tags": [
          "用户资料",
          "用户资料"
        ],
        "summary": "Get User Profile",
        "description": "获取用户详细资料",
        "operationId": "get_user_profile_api_profile__get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      },
      "put": {
        "tags": [
          "用户资料",
          "用户资料"
        ],
        "summary": "Update User Profile",
        "description": "更新用户详细资料",
        "operationId": "update_user_profile_api_profile__put",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserUpdate"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/profile/password": {
      "put": {
        "tags": [
          "用户资料",
          "用户资料"
        ],
        "summary": "Update Password",
        "description": "更新用户密码",
        "operationId": "update_password_api_profile_password_put",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserPasswordUpdate"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StatusResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          },
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/profile/avatar/{bipupu_id}": {
      "get": {
        "tags": [
          "用户资料",
          "用户资料"
        ],
        "summary": "Get User Avatar",
        "description": "获取用户头像（通过用户业务 ID bipupu_id 提供）",
        "operationId": "get_user_avatar_api_profile_avatar__bipupu_id__get",
        "parameters": [
          {
            "name": "bipupu_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Bipupu Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/users/{bipupu_id}": {
      "get": {
        "tags": [
          "用户管理",
          "用户"
        ],
        "summary": "Get User By Bipupu Id",
        "description": "通过 bipupu_id 获取用户公开信息",
        "operationId": "get_user_by_bipupu_id_api_users__bipupu_id__get",
        "parameters": [
          {
            "name": "bipupu_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Bipupu Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/users/{bipupu_id}/avatar": {
      "get": {
        "tags": [
          "用户管理",
          "用户"
        ],
        "summary": "Get User Avatar By Bipupu Id",
        "description": "通过 bipupu_id 获取用户头像",
        "operationId": "get_user_avatar_by_bipupu_id_api_users__bipupu_id__avatar_get",
        "parameters": [
          {
            "name": "bipupu_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Bipupu Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/contacts/": {
      "get": {
        "tags": [
          "联系人"
        ],
        "summary": "Get Contacts",
        "description": "获取联系人列表",
        "operationId": "get_contacts_api_contacts__get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ContactListResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      },
      "post": {
        "tags": [
          "联系人"
        ],
        "summary": "Add Contact",
        "description": "添加联系人",
        "operationId": "add_contact_api_contacts__post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ContactCreate"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ContactResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/contacts/{contact_bipupu_id}": {
      "put": {
        "tags": [
          "联系人"
        ],
        "summary": "Update Contact",
        "description": "更新联系人（通过 contact 的 bipupu_id 更新备注）",
        "operationId": "update_contact_api_contacts__contact_bipupu_id__put",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "contact_bipupu_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Contact Bipupu Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ContactUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "联系人"
        ],
        "summary": "Delete Contact",
        "description": "删除联系人（通过 contact 的 bipupu_id）",
        "operationId": "delete_contact_api_contacts__contact_bipupu_id__delete",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "contact_bipupu_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Contact Bipupu Id"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/service_accounts/": {
      "get": {
        "tags": [
          "服务号"
        ],
        "summary": "List Service Accounts",
        "description": "获取所有活跃的服务号列表",
        "operationId": "list_service_accounts_api_service_accounts__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "title": "Skip"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 100,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ServiceAccountList"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/service_accounts/{name}": {
      "get": {
        "tags": [
          "服务号"
        ],
        "summary": "Get Service Account",
        "description": "获取指定服务号详情",
        "operationId": "get_service_account_api_service_accounts__name__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "name",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Name"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ServiceAccountResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/service_accounts/{name}/avatar": {
      "get": {
        "tags": [
          "服务号"
        ],
        "summary": "Get Service Avatar",
        "description": "获取服务号头像",
        "operationId": "get_service_avatar_api_service_accounts__name__avatar_get",
        "parameters": [
          {
            "name": "name",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Name"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/service_accounts/subscriptions/": {
      "get": {
        "tags": [
          "服务号"
        ],
        "summary": "Get User Subscriptions",
        "description": "获取用户订阅的服务号列表",
        "operationId": "get_user_subscriptions_api_service_accounts_subscriptions__get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ServiceAccountList"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/service_accounts/{name}/subscribe": {
      "post": {
        "tags": [
          "服务号"
        ],
        "summary": "Subscribe Service Account",
        "description": "订阅服务号",
        "operationId": "subscribe_service_account_api_service_accounts__name__subscribe_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "name",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Name"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "服务号"
        ],
        "summary": "Unsubscribe Service Account",
        "description": "取消订阅服务号",
        "operationId": "unsubscribe_service_account_api_service_accounts__name__subscribe_delete",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "name",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Name"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/admin/login": {
      "get": {
        "tags": [
          "管理后台"
        ],
        "summary": "Admin Login Page",
        "description": "管理后台登录页面",
        "operationId": "admin_login_page_admin_login_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "管理后台"
        ],
        "summary": "Admin Login",
        "description": "处理管理后台登录",
        "operationId": "admin_login_admin_login_post",
        "requestBody": {
          "content": {
            "application/x-www-form-urlencoded": {
              "schema": {
                "$ref": "#/components/schemas/Body_admin_login_admin_login_post"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/admin/logout": {
      "post": {
        "tags": [
          "管理后台"
        ],
        "summary": "Admin Logout",
        "description": "处理管理后台登出",
        "operationId": "admin_logout_admin_logout_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/admin/": {
      "get": {
        "tags": [
          "管理后台"
        ],
        "summary": "Admin Dashboard",
        "description": "管理后台仪表板",
        "operationId": "admin_dashboard_admin__get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/admin/users": {
      "get": {
        "tags": [
          "管理后台"
        ],
        "summary": "Admin Users",
        "description": "用户管理页面",
        "operationId": "admin_users_admin_users_get",
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 1,
              "title": "Page"
            }
          },
          {
            "name": "per_page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 20,
              "title": "Per Page"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/admin/users/{user_id}": {
      "get": {
        "tags": [
          "管理后台"
        ],
        "summary": "Admin User Detail",
        "description": "用户详情页面",
        "operationId": "admin_user_detail_admin_users__user_id__get",
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "User Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/admin/messages": {
      "get": {
        "tags": [
          "管理后台"
        ],
        "summary": "Admin Messages",
        "description": "消息管理页面",
        "operationId": "admin_messages_admin_messages_get",
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 1,
              "title": "Page"
            }
          },
          {
            "name": "per_page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 20,
              "title": "Per Page"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/admin/service_accounts": {
      "get": {
        "tags": [
          "管理后台"
        ],
        "summary": "Admin Services",
        "description": "服务号管理页面",
        "operationId": "admin_services_admin_service_accounts_get",
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 1,
              "title": "Page"
            }
          },
          {
            "name": "per_page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 20,
              "title": "Per Page"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/admin/service_accounts/{service_id}/toggle": {
      "post": {
        "tags": [
          "管理后台"
        ],
        "summary": "Toggle Service Status",
        "description": "切换服务号激活状态",
        "operationId": "toggle_service_status_admin_service_accounts__service_id__toggle_post",
        "parameters": [
          {
            "name": "service_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Service Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/admin/service_accounts/{service_id}/avatar": {
      "post": {
        "tags": [
          "管理后台"
        ],
        "summary": "Upload Service Avatar",
        "description": "上传服务号头像",
        "operationId": "upload_service_avatar_admin_service_accounts__service_id__avatar_post",
        "parameters": [
          {
            "name": "service_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Service Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/Body_upload_service_avatar_admin_service_accounts__service_id__avatar_post"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/admin/service_accounts/{service_name}/broadcast": {
      "post": {
        "tags": [
          "管理后台"
        ],
        "summary": "Broadcast Service Message",
        "description": "服务号广播消息",
        "operationId": "broadcast_service_message_admin_service_accounts__service_name__broadcast_post",
        "parameters": [
          {
            "name": "service_name",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Service Name"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/x-www-form-urlencoded": {
              "schema": {
                "$ref": "#/components/schemas/Body_broadcast_service_message_admin_service_accounts__service_name__broadcast_post"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/admin/test_chat": {
      "get": {
        "tags": [
          "管理后台"
        ],
        "summary": "Admin Test Chat",
        "description": "API测试页面 (消息)",
        "operationId": "admin_test_chat_admin_test_chat_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/admin/test_chat/send": {
      "post": {
        "tags": [
          "管理后台"
        ],
        "summary": "Admin Send Message",
        "description": "处理发送消息测试",
        "operationId": "admin_send_message_admin_test_chat_send_post",
        "requestBody": {
          "content": {
            "application/x-www-form-urlencoded": {
              "schema": {
                "$ref": "#/components/schemas/Body_admin_send_message_admin_test_chat_send_post"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "ApiInfoResponse": {
        "properties": {
          "message": {
            "type": "string",
            "title": "Message"
          },
          "version": {
            "type": "string",
            "title": "Version"
          },
          "project": {
            "type": "string",
            "title": "Project"
          },
          "docs_url": {
            "type": "string",
            "title": "Docs Url"
          },
          "redoc_url": {
            "type": "string",
            "title": "Redoc Url"
          }
        },
        "type": "object",
        "required": [
          "message",
          "version",
          "project",
          "docs_url",
          "redoc_url"
        ],
        "title": "ApiInfoResponse",
        "description": "根路径 API 信息响应"
      },
      "BlockUserRequest": {
        "properties": {
          "user_id": {
            "type": "integer",
            "title": "User Id"
          }
        },
        "type": "object",
        "required": [
          "user_id"
        ],
        "title": "BlockUserRequest",
        "description": "黑名单用户请求"
      },
      "BlockedUserResponse": {
        "properties": {
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "bipupu_id": {
            "type": "string",
            "title": "Bipupu Id"
          },
          "username": {
            "type": "string",
            "title": "Username"
          },
          "nickname": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Nickname"
          },
          "avatar_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Avatar Url"
          },
          "blocked_at": {
            "type": "string",
            "format": "date-time",
            "title": "Blocked At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "bipupu_id",
          "username",
          "blocked_at"
        ],
        "title": "BlockedUserResponse",
        "description": "被拉黑用户响应模型"
      },
      "Body_admin_login_admin_login_post": {
        "properties": {
          "username": {
            "type": "string",
            "title": "Username"
          },
          "password": {
            "type": "string",
            "title": "Password"
          }
        },
        "type": "object",
        "required": [
          "username",
          "password"
        ],
        "title": "Body_admin_login_admin_login_post"
      },
      "Body_admin_send_message_admin_test_chat_send_post": {
        "properties": {
          "receiver_id": {
            "type": "string",
            "title": "Receiver Id"
          },
          "content": {
            "type": "string",
            "title": "Content"
          },
          "message_type": {
            "type": "string",
            "title": "Message Type"
          }
        },
        "type": "object",
        "required": [
          "receiver_id",
          "content",
          "message_type"
        ],
        "title": "Body_admin_send_message_admin_test_chat_send_post"
      },
      "Body_broadcast_service_message_admin_service_accounts__service_name__broadcast_post": {
        "properties": {
          "content": {
            "type": "string",
            "title": "Content"
          },
          "led_pattern": {
            "type": "string",
            "title": "Led Pattern"
          }
        },
        "type": "object",
        "required": [
          "content"
        ],
        "title": "Body_broadcast_service_message_admin_service_accounts__service_name__broadcast_post"
      },
      "Body_upload_avatar_api_profile_avatar_post": {
        "properties": {
          "file": {
            "type": "string",
            "format": "binary",
            "title": "File"
          }
        },
        "type": "object",
        "required": [
          "file"
        ],
        "title": "Body_upload_avatar_api_profile_avatar_post"
      },
      "Body_upload_service_avatar_admin_service_accounts__service_id__avatar_post": {
        "properties": {
          "file": {
            "type": "string",
            "format": "binary",
            "title": "File"
          }
        },
        "type": "object",
        "required": [
          "file"
        ],
        "title": "Body_upload_service_avatar_admin_service_accounts__service_id__avatar_post"
      },
      "ContactCreate": {
        "properties": {
          "contact_bipupu_id": {
            "type": "string",
            "title": "Contact Bipupu Id",
            "description": "联系人的 bipupu_id"
          },
          "alias": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Alias",
            "description": "备注名"
          }
        },
        "type": "object",
        "required": [
          "contact_bipupu_id"
        ],
        "title": "ContactCreate",
        "description": "添加联系人"
      },
      "ContactListResponse": {
        "properties": {
          "contacts": {
            "items": {
              "$ref": "#/components/schemas/ContactResponse"
            },
            "type": "array",
            "title": "Contacts"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          }
        },
        "type": "object",
        "required": [
          "contacts",
          "total"
        ],
        "title": "ContactListResponse",
        "description": "联系人列表响应"
      },
      "ContactResponse": {
        "properties": {
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "contact_bipupu_id": {
            "type": "string",
            "title": "Contact Bipupu Id"
          },
          "contact_username": {
            "type": "string",
            "title": "Contact Username"
          },
          "contact_nickname": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Contact Nickname"
          },
          "alias": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Alias"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "contact_bipupu_id",
          "contact_username",
          "contact_nickname",
          "alias",
          "created_at"
        ],
        "title": "ContactResponse",
        "description": "联系人响应"
      },
      "ContactUpdate": {
        "properties": {
          "alias": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Alias",
            "description": "备注名"
          }
        },
        "type": "object",
        "title": "ContactUpdate",
        "description": "更新联系人"
      },
      "CosmicProfile": {
        "properties": {
          "birthday": {
            "anyOf": [
              {
                "type": "string",
                "format": "date"
              },
              {
                "type": "null"
              }
            ],
            "title": "Birthday",
            "description": "公历生日，格式 YYYY-MM-DD"
          },
          "zodiac": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Zodiac",
            "description": "西方星座，例如 '白羊座'"
          },
          "age": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Age",
            "description": "年龄（整数岁）"
          },
          "bazi": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Bazi",
            "description": "生辰八字字符串（可由用户提供或第三方服务计算）"
          },
          "gender": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Gender",
            "description": "性别，例如 'male','female','other'，可选"
          },
          "mbti": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Mbti",
            "description": "MBTI 类型，例如 'INTJ'"
          },
          "birth_time": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Birth Time",
            "description": "出生时间，例如 '08:30'"
          },
          "birthplace": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Birthplace",
            "description": "出生地，城市/经纬度等"
          }
        },
        "type": "object",
        "title": "CosmicProfile",
        "description": "结构化的宇宙信息（可在未来扩展）"
      },
      "FavoriteCreate": {
        "properties": {
          "note": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Note"
          }
        },
        "type": "object",
        "title": "FavoriteCreate"
      },
      "FavoriteListResponse": {
        "properties": {
          "favorites": {
            "items": {
              "$ref": "#/components/schemas/FavoriteResponse"
            },
            "type": "array",
            "title": "Favorites"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          },
          "page": {
            "type": "integer",
            "title": "Page"
          },
          "page_size": {
            "type": "integer",
            "title": "Page Size"
          }
        },
        "type": "object",
        "required": [
          "favorites",
          "total",
          "page",
          "page_size"
        ],
        "title": "FavoriteListResponse"
      },
      "FavoriteResponse": {
        "properties": {
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "message_id": {
            "type": "integer",
            "title": "Message Id"
          },
          "user_id": {
            "type": "integer",
            "title": "User Id"
          },
          "note": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Note"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "message": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/MessageResponse"
              },
              {
                "type": "null"
              }
            ]
          }
        },
        "type": "object",
        "required": [
          "id",
          "message_id",
          "user_id",
          "note",
          "created_at"
        ],
        "title": "FavoriteResponse"
      },
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "type": "array",
            "title": "Detail"
          }
        },
        "type": "object",
        "title": "HTTPValidationError"
      },
      "HealthResponse": {
        "properties": {
          "status": {
            "type": "string",
            "title": "Status"
          },
          "service": {
            "type": "string",
            "title": "Service"
          }
        },
        "type": "object",
        "required": [
          "status",
          "service"
        ],
        "title": "HealthResponse",
        "description": "健康检查响应"
      },
      "LiveResponse": {
        "properties": {
          "status": {
            "type": "string",
            "title": "Status"
          }
        },
        "type": "object",
        "required": [
          "status"
        ],
        "title": "LiveResponse",
        "description": "存活检查响应"
      },
      "MessageCreate": {
        "properties": {
          "receiver_id": {
            "type": "string",
            "title": "Receiver Id",
            "description": "接收者的 bipupu_id"
          },
          "content": {
            "type": "string",
            "minLength": 1,
            "title": "Content",
            "description": "消息内容"
          },
          "message_type": {
            "$ref": "#/components/schemas/MessageType",
            "description": "消息类型：NORMAL, VOICE, SYSTEM",
            "default": "NORMAL"
          },
          "pattern": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Pattern",
            "description": "控制 pupu 机显示/光效/屏保等"
          }
        },
        "type": "object",
        "required": [
          "receiver_id",
          "content"
        ],
        "title": "MessageCreate",
        "description": "创建消息"
      },
      "MessageListResponse": {
        "properties": {
          "messages": {
            "items": {
              "$ref": "#/components/schemas/MessageResponse"
            },
            "type": "array",
            "title": "Messages"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          },
          "page": {
            "type": "integer",
            "title": "Page"
          },
          "page_size": {
            "type": "integer",
            "title": "Page Size"
          }
        },
        "type": "object",
        "required": [
          "messages",
          "total",
          "page",
          "page_size"
        ],
        "title": "MessageListResponse",
        "description": "消息列表响应"
      },
      "MessageResponse": {
        "properties": {
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "sender_bipupu_id": {
            "type": "string",
            "title": "Sender Bipupu Id"
          },
          "receiver_bipupu_id": {
            "type": "string",
            "title": "Receiver Bipupu Id"
          },
          "content": {
            "type": "string",
            "title": "Content"
          },
          "message_type": {
            "$ref": "#/components/schemas/MessageType"
          },
          "pattern": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Pattern"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "sender_bipupu_id",
          "receiver_bipupu_id",
          "content",
          "message_type",
          "created_at"
        ],
        "title": "MessageResponse",
        "description": "消息响应"
      },
      "MessageType": {
        "type": "string",
        "enum": [
          "NORMAL",
          "VOICE",
          "SYSTEM"
        ],
        "title": "MessageType"
      },
      "PaginatedResponse_BlockedUserResponse_": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/BlockedUserResponse"
            },
            "type": "array",
            "title": "Items"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          },
          "page": {
            "type": "integer",
            "title": "Page"
          },
          "size": {
            "type": "integer",
            "title": "Size"
          },
          "pages": {
            "type": "integer",
            "title": "Pages"
          }
        },
        "type": "object",
        "required": [
          "items",
          "total",
          "page",
          "size",
          "pages"
        ],
        "title": "PaginatedResponse[BlockedUserResponse]"
      },
      "ReadyResponse": {
        "properties": {
          "status": {
            "type": "string",
            "title": "Status"
          }
        },
        "type": "object",
        "required": [
          "status"
        ],
        "title": "ReadyResponse",
        "description": "就绪检查响应"
      },
      "ServiceAccountList": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/ServiceAccountResponse"
            },
            "type": "array",
            "title": "Items"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          }
        },
        "type": "object",
        "required": [
          "items",
          "total"
        ],
        "title": "ServiceAccountList"
      },
      "ServiceAccountResponse": {
        "properties": {
          "name": {
            "type": "string",
            "title": "Name"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          },
          "avatar_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Avatar Url"
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active",
            "default": true
          },
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Updated At"
          }
        },
        "type": "object",
        "required": [
          "name",
          "id",
          "created_at"
        ],
        "title": "ServiceAccountResponse"
      },
      "StatusResponse": {
        "properties": {
          "message": {
            "type": "string",
            "title": "Message"
          }
        },
        "type": "object",
        "required": [
          "message"
        ],
        "title": "StatusResponse",
        "description": "通用状态响应"
      },
      "Token": {
        "properties": {
          "access_token": {
            "type": "string",
            "title": "Access Token"
          },
          "refresh_token": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Refresh Token"
          },
          "token_type": {
            "type": "string",
            "title": "Token Type",
            "default": "bearer"
          },
          "expires_in": {
            "type": "integer",
            "title": "Expires In"
          },
          "user": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/UserResponse"
              },
              {
                "type": "null"
              }
            ]
          }
        },
        "type": "object",
        "required": [
          "access_token",
          "expires_in"
        ],
        "title": "Token",
        "description": "令牌响应模式"
      },
      "TokenRefresh": {
        "properties": {
          "refresh_token": {
            "type": "string",
            "title": "Refresh Token"
          }
        },
        "type": "object",
        "required": [
          "refresh_token"
        ],
        "title": "TokenRefresh",
        "description": "刷新令牌模式"
      },
      "UserCreate": {
        "properties": {
          "username": {
            "type": "string",
            "title": "Username"
          },
          "password": {
            "type": "string",
            "maxLength": 128,
            "minLength": 6,
            "title": "Password"
          },
          "nickname": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Nickname"
          }
        },
        "type": "object",
        "required": [
          "username",
          "password"
        ],
        "title": "UserCreate",
        "description": "创建用户模式"
      },
      "UserLogin": {
        "properties": {
          "username": {
            "type": "string",
            "title": "Username"
          },
          "password": {
            "type": "string",
            "title": "Password"
          }
        },
        "type": "object",
        "required": [
          "username",
          "password"
        ],
        "title": "UserLogin",
        "description": "用户登录模式"
      },
      "UserPasswordUpdate": {
        "properties": {
          "old_password": {
            "type": "string",
            "title": "Old Password"
          },
          "new_password": {
            "type": "string",
            "maxLength": 128,
            "minLength": 6,
            "title": "New Password"
          }
        },
        "type": "object",
        "required": [
          "old_password",
          "new_password"
        ],
        "title": "UserPasswordUpdate",
        "description": "用户密码更新"
      },
      "UserResponse": {
        "properties": {
          "username": {
            "type": "string",
            "title": "Username"
          },
          "bipupu_id": {
            "type": "string",
            "title": "Bipupu Id"
          },
          "nickname": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Nickname"
          },
          "avatar_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Avatar Url"
          },
          "cosmic_profile": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/CosmicProfile"
              },
              {
                "type": "null"
              }
            ]
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active",
            "default": true
          },
          "is_superuser": {
            "type": "boolean",
            "title": "Is Superuser",
            "default": false
          },
          "last_active": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Active",
            "description": "最后活跃时间"
          },
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Updated At"
          }
        },
        "type": "object",
        "required": [
          "username",
          "bipupu_id",
          "id",
          "created_at"
        ],
        "title": "UserResponse",
        "description": "用户响应模式"
      },
      "UserUpdate": {
        "properties": {
          "nickname": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Nickname"
          },
          "cosmic_profile": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Cosmic Profile"
          }
        },
        "type": "object",
        "title": "UserUpdate",
        "description": "更新用户模式"
      },
      "ValidationError": {
        "properties": {
          "loc": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "type": "array",
            "title": "Location"
          },
          "msg": {
            "type": "string",
            "title": "Message"
          },
          "type": {
            "type": "string",
            "title": "Error Type"
          }
        },
        "type": "object",
        "required": [
          "loc",
          "msg",
          "type"
        ],
        "title": "ValidationError"
      }
    },
    "securitySchemes": {
      "HTTPBearer": {
        "type": "http",
        "scheme": "bearer"
      }
    }
  },
  "tags": [
    {
      "name": "系统",
      "description": "系统健康检查与服务信息"
    },
    {
      "name": "认证",
      "description": "用户注册、登录、刷新、登出"
    },
    {
      "name": "消息",
      "description": "IM 消息、回执、收藏、归档、搜索"
    },
    {
      "name": "好友",
      "description": "好友请求、同意/拒绝、好友列表"
    },
    {
      "name": "黑名单",
      "description": "拉黑、解除拉黑、黑名单查询"
    },
    {
      "name": "用户资料",
      "description": "用户信息、个人资料、在线状态"
    },
    {
      "name": "订阅",
      "description": "用户侧订阅的查询与管理"
    }
  ]
}